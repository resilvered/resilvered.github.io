<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Running Ansible on Windows &middot; Al's Ramblings
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/hyde.css">
  <link rel="stylesheet" href="/public/css/custom.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">

  <!-- JS -->
  <script type="text/javascript" src="/assets/js/jquery-1.11.1.min.js"></script>

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
                                 <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>

  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-52963682-1', 'auto');
  ga('send', 'pageview');

</script>

  <body class="theme-base-0b">

    <div class="sidebar">
  
    <div class="sidebar-about">
      <h1>
        <a href="">
          Al's Ramblings
        </a>
      </h1>
      <p class="lead">Automation, UNIX and other assorted random thoughts</p>
    </div>

    <nav class="sidebar-nav">
      <a class="sidebar-nav-item" href="">home</a>

      

      
      
        
          
        
      
        
          
            <a class="sidebar-nav-item" href="/archive/">archives</a>
          
        
      
        
      
        
          
        
      
        
          
            <a class="sidebar-nav-item" href="/presentations/">presentations</a>
          
        
      
        
          
            <a class="sidebar-nav-item" href="/tags/">tags</a>
          
        
      
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      
        
          
        
      

      </nav>
      <div id="social-bar">
        <a href="http://www.linkedin.com/in/alanchalmers/" title="Alan Chalmers on LinkedIn" rel="me"><i class="fa fa-linkedin-square fa-2x"></i></a>
        <a href="https://github.com/bigal/" title="Alan Chalmers on GitHub" rel="me"><i class="fa fa-github-square fa-2x"></i></a> 
        <a href="https://twitter.com/bigal" title="Alan Chalmers on Twitter" rel="me"><i class="fa fa-twitter-square fa-2x"></i></a>
       <a href="https://plus.google.com/+AlanChalmers/" title="Alan Chalmers on Google+" rel="me"><i class="fa fa-google-plus-square fa-2x"></i></a> 
      <p>&copy; 2022. All rights reserved.</p>
    </div>
</div>


    <div class="content container">
      <div class="post">
  <h1 class="post-title">Running Ansible on Windows</h1>
  <span class="post-date">08 Apr 2014</span>
  <div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-pVUyN4PakG8/U0OXhJXE4lI/AAAAAAAAIE8/tnAYdhmpQXs/s1600/ansible_badge.png" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"><img border="0" src="http://4.bp.blogspot.com/-pVUyN4PakG8/U0OXhJXE4lI/AAAAAAAAIE8/tnAYdhmpQXs/s1600/ansible_badge.png" height="150" width="150" /></a></div>
<p>Some times you just have to make do with what you have. So I considered this morning why is it as IT professional we are often told what tool we need to use to do our job. I mean does a carpenter get told what type of saw he need to use?</p>

<p>My tool of the trade is a Mac, not because I’m an Apple fan boy ,far from it, but as a functional computer it really does just work. Has access to the tools I need due to it’s Unix heritage, and provides and usable graphical interface for the less technical in the family.</p>

<p>It’s 2014 and it still astounds me that Windows can’t ship with a decent terminal/ command shell and ssh. Plenty of after mark products about but they really are just all flawed in subtlety different ways. My current engagement finds them doing their very best to make my life as hard as possible to achieve any real outcome. I have a bunch of work to do that needs to be repeated across a number of servers, knowing full well I have better chance of being the next flight to the space station than getting Puppet or Chef installed, I’ve opted for Ansible.</p>

<p>So if like myself you find yourself in a position to need to run some ansible from a Windows PC that you don;t have admin rights on then read on if not then arrivederci.</p>

<p>First up go grab yourself a copy of <a href="http://cygwin.com/install.html">cygwin</a></p>

<p>So no admin rights on this box either open cmd and run <strong>setup-x86_64.exe –no-admin</strong> or create a shortcut on the Desktop and add the <strong>--no-admin</strong> option. Handy as you may need to run this again later for some other installation.</p>

<p>So when you get a chance you are going to need to install the following:</p>

<ul>
  <li>wget</li>
  <li>python</li>
  <li>python-crypto</li>
  <li>python-openssl</li>
  <li>python-setuptools</li>
  <li>git</li>
  <li>vim</li>
  <li>openssh</li>
  <li>openssl</li>
  <li>openssl-devel</li>
  <li>libsasl2</li>
  <li>ca-certificates</li>
</ul>

<p>There will be a bunch of dependent packages that are required the install should figure them out and you should accept them.</p>

<p>So pretty good chance you’ll be behind a proxy so when you open the cygwin terminal you might want to set this up.</p>

<pre><code>export http_proxy=http://user:passwd@my.corporate.proxy:80/
export https_proxy=https://user:passwd@my.corporate.proxy:80/
</code></pre>

<p>Probably drop them in your .bash_profile for later use.</p>

<p>Next you going to need PyYAML and Jinja2 for Ansible and these aren’t available in the <a href="http://cygwin.com/install.html">cygwin</a> installer.</p>

<p>Grab PyYAML:</p>

<pre><code class="language-sh">wget https://pypi.python.org/packages/source/P/PyYAML/PyYAML-3.10.tar.gz
tar -xvf PyYAML-3.10.tar.gz
cd PyYAML-3.10
python setup.py install
cd ..
</code></pre>

<p>Now grab Jinja2 and rinse repeat:</p>

<pre><code class="language-sh">wget https://pypi.python.org/packages/source/J/Jinja2/Jinja2-2.6.tar.gz
tar -xvf Jinja2-2.6.tar.gz
cd Jinja2-2.6
python setup.py install
cd ..
</code></pre>

<p>If you don’t already have an ssh key the generate one. I would recommend setting a password and having a key agent installed also, ssh-keygen is what you are looking for</p>

<p>Behind the corporate firewall git will need a hand also.</p>

<pre><code>git config –global http.proxy $http_proxy
</code></pre>

<p>Now you can clone <a href="http://www.ansible.com/">ansible</a> from <a href="https://github.com/">GitHub</a>:</p>

<pre><code>git clone https://github.com/ansible/ansible /opt/ansible
</code></pre>

<p>Setup some path stuff , you probably want to drop these in your .bash_profile also</p>

<pre><code class="language-sh">ANSIBLE=/opt/ansible
export PATH=$PATH:$ANSIBLE/bin
export PYTHONPATH=$ANSIBLE/lib
export ANSIBLE_LIBRARY=$ANSIBLE/library
</code></pre>
<p>and your ready to rumble, or at least I though I was. Turns out there is an issue with the cygwin openssh and control master so make sure you add this line.</p>

<p>```sh
export ANSIBLE_SSH_ARGS=”-o ControlMaster=no”</p>

</div>
<div class="custom-social-buttons">   
  <div class="share-buttons-label">
    <span>Share with friends</span>
  </div>
  <div class="custom-social-button twitter">
    <a id="twitter-link" href="#"><i class="fa fa-twitter-square fa-2x"></i></a>
  </div>
  <div class="custom-social-button linkedin">
    <a id="linkedin-link" href="#"><i class="fa fa-linkedin-square fa-2x"></i></a>
  </div>
  <div class="custom-social-button googleplus">
    <a id="googleplus-link" href="#"><i class="fa fa-google-plus-square fa-2x"></i></a>
  </div>
    <div class="custom-social-button reddit">
    <a id="reddit-link" href="#"><i class="fa fa-reddit-square fa-2x"></i></a>
  </div>
  <script type="text/javascript">
	window.onload = function(){				
		var blogDomain = encodeURIComponent("http://www.resilvered.com");
		var pageTitleSpaces = encodeURIComponent("Running Ansible on Windows") + "&amp;";
		var pageID = "/2014/04/running-ansible-on-windows";
		var pageURL = encodeURIComponent(pageID) + "&amp;";
			
		var twitterPartOne = "https://twitter.com/intent/tweet?original_referer=";
		var twitterPartTwo = "text=";
		var twitterPartThree = "tw_p=tweetbutton&amp;url=";
		var twitterPartFour = "via=bigal";
		var twitterUrl = twitterPartOne + blogDomain + pageURL + twitterPartTwo + pageTitleSpaces + twitterPartThree + blogDomain +  pageURL + twitterPartFour;
		var twitterLink = document.getElementById("twitter-link");
		twitterLink.onclick = function() {popUp=window.open(twitterUrl, 'popupwindow', 'scrollbars=yes,width=600,height=400');popUp.focus();return false };
		
		var linkedinPartOne = "http://www.linkedin.com/shareArticle?mini=true&url=";
		var linkedinPartTwo = "&title=";
		var linkedinPartThree = "&summary=";
		var linkedinPartFour = "&source=";
		var linkedinUrl = linkedinPartOne + blogDomain + pageURL + linkedinPartTwo + pageTitleSpaces + linkedinPartFour + "@bigal";
		var linkedInLink = document.getElementById("linkedin-link");
		linkedInLink.onclick = function() {popUp=window.open(linkedinUrl, 'popupwindow', 'scrollbars=yes,width=600,height=400');popUp.focus();return false };
		
		var googlePlusPartOne = "https://plus.google.com/share?url=";
		var googlePlusUrl = googlePlusPartOne + blogDomain + pageID;
		var googlePlusLink = document.getElementById("googleplus-link");
		googlePlusLink.onclick = function() {popUp=window.open(googlePlusUrl, 'popupwindow', 'scrollbars=yes,width=600,height=400');popUp.focus();return false };

        var redditPartOne = "http://reddit.com/submit?url=";
        var redditPartTwo = "&title=";
		var redditUrl = redditPartOne + blogDomain + pageURL + redditPartTwo + pageTitleSpaces;
		var redditLink = document.getElementById("reddit-link");
		redditLink.onclick = function() {popUp=window.open(redditUrl, 'popupwindow', 'scrollbars=yes,width=600,height=400');popUp.focus();return false };

	};
</script>


</div>


<div class="related">
  <h2>Related Posts</h2>
  <ul class="related-posts">
    
      <li>
        <h3>
          <a href="/blog/2014/08/26/Installing-Jekyll-on-CentOS-7/">
            Installing Jekyll on CentOS 7
            <small>26 Aug 2014</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/blog/2014/08/12/HHVM-on-CentOS6/">
            Installing HHVM 3.2.0 on CentOS 6.5
            <small>12 Aug 2014</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/blog/2014/07/28/Oracle-Linux-7-released/">
            Oracle Linux 7 released
            <small>28 Jul 2014</small>
          </a>
        </h3>
      </li>
    
  </ul>
</div>

      
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'resilvered'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    </div>

  </body>
</html>
