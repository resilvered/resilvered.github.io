---
title: "Running Ansible on Windows"
layout: "post"
permalink: "/2014/04/running-ansible-on-windows.html"
uuid: "4874240834498484597"
guid: "tag:blogger.com,1999:blog-8745734052417186264.post-4874240834498484597"
date: "2014-04-08 06:42:00"
updated: "2014-04-08 06:42:38"
description: 
blogger:
    siteid: "8745734052417186264"
    postid: "4874240834498484597"
    comments: "0"
categories: [ blog, work, windows, ansible, configuration management]
tags: [work, windows, ansible, configuration management]
author: 
    name: "Alan Chalmers"
    url: "https://plus.google.com/109008868852571463084?rel=author"
    image: "//lh6.googleusercontent.com/-vRVdiWd12ak/AAAAAAAAAAI/AAAAAAAAHKc/wXgK4dFefp8/s512-c/photo.jpg"
comments: True
---

<div class="css-full-post-content js-full-post-content">
<head>  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" type="text/javascript"></script>  <script src="//cdnjs.cloudflare.com/ajax/libs/gist-embed/1.7/gist-embed.min.js" type="text/javascript"></script></head> <br /><div style="background-color: white; color: #222222; font-family: arial, sans-serif; font-size: 13px;"><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-pVUyN4PakG8/U0OXhJXE4lI/AAAAAAAAIE8/tnAYdhmpQXs/s1600/ansible_badge.png" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"><img border="0" src="http://4.bp.blogspot.com/-pVUyN4PakG8/U0OXhJXE4lI/AAAAAAAAIE8/tnAYdhmpQXs/s1600/ansible_badge.png" height="200" width="200" /></a></div>Some times you just have to make do with what you have.</div><div style="background-color: white; color: #222222; font-family: arial, sans-serif; font-size: 13px;"><br /></div><div style="background-color: white; color: #222222; font-family: arial, sans-serif; font-size: 13px;">So I considered this morning why is it as IT professional we are often told what tool we need to use to do our job. I mean does a carpenter get told what type of saw he need to use?</div><div style="background-color: white; color: #222222; font-family: arial, sans-serif; font-size: 13px;">My tool of the trade is a Mac, not because I'm an Apple fan boy ,far from it, but as a functional computer it really does just work. Has access to the tools I need due to it's Unix heritage, and provides and usable Graphical interface for the less technical in the family.</div><div style="background-color: white; color: #222222; font-family: arial, sans-serif; font-size: 13px;"><br /></div><div style="background-color: white; color: #222222; font-family: arial, sans-serif; font-size: 13px;">It's 2014 and it still astounds me that Windows can't ship with a decent terminal/ command shell and ssh. Plenty of after mark products about but they really are just all flawed in subtlety different ways. My current engagement finds them doing their very best to make my life as hard as possible to achieve any real outcome. I have a bunch of work to do that needs to be repeated across a number of servers, knowing full well I have better chance of being the next flight to the space station than getting Puppet or Chef installed, I've opted for Ansible.</div><div style="background-color: white; color: #222222; font-family: arial, sans-serif; font-size: 13px;"><br /></div><div style="background-color: white; color: #222222; font-family: arial, sans-serif; font-size: 13px;">So if like myself you find yourself in a position to need to run some ansible from a Windows PC that you don;t have admin rights on then read on if not then arrivederci.</div><div style="background-color: white; color: #222222; font-family: arial, sans-serif; font-size: 13px;"><br /></div><div style="background-color: white; color: #222222; font-family: arial, sans-serif; font-size: 13px;">First up go grab yourself a copy of <a href="http://cygwin.com/install.html" target="_blank">cygwin</a></div><div style="background-color: white; color: #222222; font-family: arial, sans-serif; font-size: 13px;"><br /></div><div style="background-color: white; color: #222222; font-size: 13px;"><span style="font-family: arial, sans-serif;">So no admin rights on this box either open cmd and run</span><span style="font-family: Courier New, Courier, monospace;"> <b>setup-x86_64.exe --no-admin</b></span><span style="font-family: arial, sans-serif;"> or create a shortcut on the Desktop and add the </span><span style="font-family: Courier New, Courier, monospace;"><b>--no-admin</b></span><span style="font-family: arial, sans-serif;"> option. Handy as you may need to run this again later for some other installation.</span></div><div style="background-color: white; color: #222222; font-family: arial, sans-serif; font-size: 13px;"><br /></div><div style="background-color: white; color: #222222; font-family: arial, sans-serif; font-size: 13px;">So when you get a chance you are going to need to install the following:</div><div style="background-color: white; color: #222222; font-family: arial, sans-serif; font-size: 13px;"><ul><li><span style="background-color: yellow;">wget</span></li><li>python</li><li>python-crypto</li><li>python-openssl</li><li>python-setuptools</li><li>git</li><li>vim</li><li><span style="background-color: yellow;">openssh</span></li><li><span style="background-color: yellow;">openssl</span></li><li>openssl-devel</li><li>libsasl2</li><li>ca-certificates</li></ul></div><div style="background-color: white; color: #222222; font-family: arial, sans-serif; font-size: 13px;">There will be a bunch of dependent packages that are required the install should figure them out and you should accept them.<br /><br /></div><div style="background-color: white; color: #222222; font-family: arial, sans-serif; font-size: 13px;">So pretty good chance you'll be behind a proxy so when you open the cygwin terminal you might want to set this up.</div><div style="background-color: white; color: #222222; font-family: arial, sans-serif; font-size: 13px;"><br /></div><div style="background-color: white; color: #222222; font-size: 13px;"><span style="font-family: Courier New, Courier, monospace;">export http_proxy=http://user:passwd@<wbr></wbr>my.corporate.proxy:80/</span></div><div style="background-color: white; color: #222222; font-size: 13px;"><span style="font-family: Courier New, Courier, monospace;">export https_proxy=https://user:<wbr></wbr>passwd@my.corporate.proxy:80/</span></div><div style="background-color: white; color: #222222; font-family: arial, sans-serif; font-size: 13px;"><br /></div><div style="background-color: white; color: #222222; font-family: arial, sans-serif; font-size: 13px;">Probably drop them in your .bash_profile for later use.</div><div style="background-color: white; color: #222222; font-family: arial, sans-serif; font-size: 13px;"><br /></div><div style="background-color: white; color: #222222; font-family: arial, sans-serif; font-size: 13px;">Next you going to need PyYAML and Jinja2 for Ansible and these aren't available in the <a href="http://cygwin.com/install.html">cygwin</a>&nbsp;installer.</div><div style="background-color: white; color: #222222; font-family: arial, sans-serif; font-size: 13px;"><br /></div><div style="background-color: white; color: #222222; font-family: arial, sans-serif; font-size: 13px;">Grab PyYAML:</div><br /><code class="gist-embed" data-gist-hide-line-numbers="true" data-gist-id="10091120"></code> <div style="background-color: white; color: #222222; font-family: arial, sans-serif; font-size: 13px;">Now grab Jinja2 and rinse repeat:</div><br /><code class="gist-embed" data-gist-hide-line-numbers="true" data-gist-id="10091271"></code> <div style="background-color: white; color: #222222; font-size: 13px;"><span style="font-family: arial, sans-serif;">If you don't already have an ssh key the generate one. I would recommend setting a password and having a key agent installed also, </span><span style="font-family: Courier New, Courier, monospace;">ssh-keygen</span><span style="font-family: arial, sans-serif;"> is what you are looking for</span></div><div style="background-color: white; color: #222222; font-family: arial, sans-serif; font-size: 13px;"><br /></div><div style="background-color: white; color: #222222; font-family: arial, sans-serif; font-size: 13px;">Behind the corporate firewall git will need a hand also.</div><div style="background-color: white; color: #222222; font-family: arial, sans-serif; font-size: 13px;"><br /></div><div style="background-color: white; color: #222222; font-size: 13px;"><span style="font-family: Courier New, Courier, monospace;">git config â€“global http.proxy $http_proxy</span></div><div style="background-color: white; color: #222222; font-family: arial, sans-serif; font-size: 13px;"><br /></div><div style="background-color: white; color: #222222; font-family: arial, sans-serif; font-size: 13px;">Now you can clone <a href="http://www.ansible.com/">ansible</a> from <a href="https://github.com/">GitHub</a>:</div><div style="background-color: white; color: #222222; font-family: arial, sans-serif; font-size: 13px;"><br /></div><div style="background-color: white; color: #222222; font-size: 13px;"><span style="font-family: Courier New, Courier, monospace;">git clone&nbsp;<a href="https://github.com/ansible/ansible" style="color: #1155cc;" target="_blank">https://github.com/ansible/<wbr></wbr>ansible</a>&nbsp;/opt/ansible</span></div><div style="background-color: white; color: #222222; font-family: arial, sans-serif; font-size: 13px;"><br /></div><div style="background-color: white; color: #222222; font-family: arial, sans-serif; font-size: 13px;">Setup some path stuff , you probably want to drop these in your .bash_profile also</div><br /><code class="gist-embed" data-gist-hide-line-numbers="true" data-gist-id="10092745" data-gist-line="1-4"></code> <br /><div style="background-color: white; color: #222222; font-family: arial, sans-serif; font-size: 13px;">and your ready to rumble, or at least I though I was. Turns out there is an issue with the cygwin openssh and control master so make sure you add this line.</div><br /><code class="gist-embed" data-gist-hide-line-numbers="true" data-gist-id="10092745" data-gist-line="5"></code>
</div>
